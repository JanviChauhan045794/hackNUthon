{% extends 'farmer/farmer_base.html' %}

{% block content %}
<div class="flex flex-col p-5 space-y-6">
    <!-- Welcome Section with Stats -->
    <div class="bg-gradient-to-br from-green-500 via-green-600 to-green-700 rounded-2xl p-8 text-white shadow-xl relative overflow-hidden">
        <!-- Animated Background Pattern -->
        <div class="absolute inset-0 opacity-10">
            <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDBoNjB2NjBIMHoiLz48cGF0aCBkPSJNMzYuMjUgMzUuMjVoLTIuNXYtMi41aDIuNXYyLjV6bTAgMGgyLjV2LTIuNWgtMi41djIuNXoiIGZpbGw9IiNmZmYiLz48L2c+PC9zdmc+')]"></div>
        </div>
        <div class="relative z-10 flex items-center justify-between">
            <div>
                <h1 class="text-4xl font-bold mb-3">Welcome back, {{ user.username }}!</h1>
                <p class="text-green-100 text-lg">Here's what's happening with your farm today</p>
            </div>
            <div class="bg-white/10 p-6 rounded-full backdrop-blur-sm transform hover:scale-110 transition-all duration-300">
                <i class="fas fa-leaf text-5xl"></i>
            </div>
        </div>
        <!-- Quick Stats -->
        <div class="grid grid-cols-3 gap-4 mt-8">
            <div class="bg-white/10 p-4 rounded-xl backdrop-blur-sm transform hover:scale-105 transition-all duration-300">
                <div class="text-2xl font-bold">{{ total_products }}</div>
                <div class="text-sm text-green-100">Total Products</div>
            </div>
            <div class="bg-white/10 p-4 rounded-xl backdrop-blur-sm transform hover:scale-105 transition-all duration-300">
                <div class="text-2xl font-bold">{{ pending_orders }}</div>
                <div class="text-sm text-green-100">Pending Orders</div>
            </div>
            <div class="bg-white/10 p-4 rounded-xl backdrop-blur-sm transform hover:scale-105 transition-all duration-300">
                <div class="text-2xl font-bold">â‚¹{{ total_sales }}</div>
                <div class="text-sm text-green-100">Total Sales</div>
            </div>
        </div>
    </div>

    <!-- Profile Completion Section -->
    {% if not farmer_profile %}
    <div class="bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 rounded-xl p-6 shadow-xl relative overflow-hidden transform hover:scale-[1.02] transition-all duration-300">
        <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDBoNjB2NjBIMHoiLz48cGF0aCBkPSJNMzYuMjUgMzUuMjVoLTIuNXYtMi41aDIuNXYyLjV6bTAgMGgyLjV2LTIuNWgtMi41djIuNXoiIGZpbGw9IiNmZmYiLz48L2c+PC9zdmc+')] opacity-10"></div>
        <div class="relative z-10 flex items-center space-x-4">
            <div class="bg-white/20 p-4 rounded-full backdrop-blur-sm">
                <i class="fas fa-exclamation-triangle text-white text-2xl"></i>
            </div>
            <div class="flex-1">
                <h3 class="text-xl font-semibold text-white">Complete Your Profile</h3>
                <p class="text-white/90 mt-1">Please complete your farmer profile to start adding products.</p>
                <a href="{% url 'edit_farmer_profile' %}" 
                   class="inline-flex items-center mt-4 px-6 py-2.5 bg-white text-yellow-600 rounded-lg font-medium hover:bg-yellow-50 transition-all duration-300 transform hover:scale-105 hover:shadow-lg">
                    <i class="fas fa-user-edit mr-2"></i>Complete Profile
                </a>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Quick Actions -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Add Product Card -->
        <a href="{% url 'add_product' %}" 
           class="group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-br from-green-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <div class="relative z-10 flex items-center space-x-4">
                <div class="bg-green-100 dark:bg-green-900 p-4 rounded-xl group-hover:scale-110 transition-transform duration-300">
                    <i class="fas fa-plus-circle text-green-600 dark:text-green-400 text-2xl"></i>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Add New Product</h3>
                    <p class="text-gray-600 dark:text-gray-300 text-sm">List your farm products</p>
                </div>
            </div>
        </a>

        <!-- Product List Card -->
        <a href="{% url 'product_list' %}" 
           class="group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <div class="relative z-10 flex items-center space-x-4">
                <div class="bg-blue-100 dark:bg-blue-900 p-4 rounded-xl group-hover:scale-110 transition-transform duration-300">
                    <i class="fas fa-list text-blue-600 dark:text-blue-400 text-2xl"></i>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Your Products</h3>
                    <p class="text-gray-600 dark:text-gray-300 text-sm">Manage your listings</p>
                </div>
            </div>
        </a>

        <!-- Certification Card -->
        <a href="{% url 'certification_request' %}" 
           class="group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-br from-yellow-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <div class="relative z-10 flex items-center space-x-4">
                <div class="bg-yellow-100 dark:bg-yellow-900 p-4 rounded-xl group-hover:scale-110 transition-transform duration-300">
                    <i class="fas fa-certificate text-yellow-600 dark:text-yellow-400 text-2xl"></i>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Certification</h3>
                    <p class="text-gray-600 dark:text-gray-300 text-sm">Request & track certification</p>
                </div>
            </div>
        </a>
    </div>

    <!-- Recent Activity -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-gray-500/5 to-transparent"></div>
        <div class="relative z-10">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-semibold text-gray-800 dark:text-white">Recent Activity</h2>
                <div class="bg-green-100 dark:bg-green-900 p-2 rounded-lg">
                    <i class="fas fa-clock text-green-600 dark:text-green-400"></i>
                </div>
            </div>
            <div class="space-y-4">
                {% if recent_products %}
                    {% for product in recent_products %}
                    <div class="group flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-300 relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-r from-green-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10 flex items-center space-x-4">
                            <div class="bg-white dark:bg-gray-800 p-3 rounded-lg group-hover:scale-110 transition-transform duration-300">
                                <i class="fas fa-box text-green-600 dark:text-green-400"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-900 dark:text-white">Added new product: {{ product.product_name }}</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">{{ product.created_at|date:"M d, Y" }}</p>
                            </div>
                        </div>
                        {% if product.id %}
                        <a href="{% url 'edit_product' product.id %}" 
                           class="relative z-10 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-300">
                            <i class="fas fa-edit"></i>
                        </a>
                        {% endif %}
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="text-center py-8">
                        <div class="bg-gray-100 dark:bg-gray-700 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-inbox text-gray-400 dark:text-gray-500 text-2xl"></i>
                        </div>
                        <p class="text-gray-500 dark:text-gray-400">No recent activity</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Add custom styles for animations -->
<style>
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    .hover\:float:hover {
        animation: float 2s ease-in-out infinite;
    }

    .hover\:pulse:hover {
        animation: pulse 2s ease-in-out infinite;
    }

    .transition-all {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Glassmorphism effect */
    .glass {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Gradient text animation */
    @keyframes gradient-text {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .gradient-text {
        background: linear-gradient(90deg, #4ade80, #22c55e, #4ade80);
        background-size: 200% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: gradient-text 3s ease infinite;
    }
</style>
{% endblock %}